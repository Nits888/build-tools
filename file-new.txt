import React, { useState, useEffect } from 'react';
import data from './data.json'; // Adjust the path as necessary

// Mock EzyOptionSelector component for demonstration purposes
const EzyOptionSelector = ({ options, label, selected, onSelect }) => (
  <div>
    <label>{label}</label>
    <select value={selected} onChange={(e) => onSelect(e.target.value)}>
      <option value="">Select {label}</option>
      {options.map((option) => (
        <option key={option} value={option}>
          {option}
        </option>
      ))}
    </select>
  </div>
);

const MainComponent = () => {
  const [acSelection, setAcSelection] = useState('');
  const [sacSelection, setSacSelection] = useState('');
  const [ownerSelection, setOwnerSelection] = useState('');
  const [applicationSelection, setApplicationSelection] = useState('');

  // Determine the options for each dropdown
  const acOptions = Object.keys(data);
  const sacOptions = acSelection ? Object.keys(data[acSelection] || {}) : [];
  const ownerOptions = acSelection && sacSelection
    ? [...new Set((data[acSelection][sacSelection] || []).map(item => item.Owner))]
    : [];
  const applicationOptions = acSelection && sacSelection && ownerSelection
    ? [...new Set((data[acSelection][sacSelection] || []).filter(item => item.Owner === ownerSelection).map(item => item.Applications))]
    : [];

  return (
    <div>
      <EzyOptionSelector
        options={acOptions}
        label="Asset Class"
        selected={acSelection}
        onSelect={setAcSelection}
      />

      <EzyOptionSelector
        options={sacOptions}
        label="Sub Asset Class"
        selected={sacSelection}
        onSelect={setSacSelection}
      />

      <EzyOptionSelector
        options={ownerOptions}
        label="Owner"
        selected={ownerSelection}
        onSelect={setOwnerSelection}
      />

      <EzyOptionSelector
        options={applicationOptions}
        label="Application"
        selected={applicationSelection}
        onSelect={setApplicationSelection}
      />

      {/* Display selected values */}
      <div>
        <h3>Selected Values:</h3>
        <p>AC: {acSelection}</p>
        <p>SAC: {sacSelection}</p>
        <p>Owner: {ownerSelection}</p>
        <p>Application: {applicationSelection}</p>
      </div>
    </div>
  );
};

export default MainComponent;
