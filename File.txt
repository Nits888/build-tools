// MyComponent.tsx

import React, { useState } from 'react';
import assetData, { SubAssetClass, ProductionService } from './assetData';
import EzyOptionSelector from './EzyOptionSelector';

const MyComponent: React.FC = () => {
  const [selectedAssetClass, setSelectedAssetClass] = useState<string | null>(null);
  const [selectedSubAssetClass, setSelectedSubAssetClass] = useState<string | null>(null);
  const [subAssetClasses, setSubAssetClasses] = useState<SubAssetClass[]>([]);
  const [productionServices, setProductionServices] = useState<ProductionService[]>([]);

  const handleChange = (key: string, value: string) => {
    console.log(`Key: ${key}, Value: ${value}`);
  };

  const handleAssetClassChange = (value: string) => {
    setSelectedAssetClass(value);
    const assetClass = assetData.AssetClasses.find(ac => ac.name === value);
    setSubAssetClasses(assetClass ? assetClass.SubAssetClasses : []);
    setSelectedSubAssetClass(null);
    setProductionServices([]);
    handleChange('assetclass', value);
  };

  const handleSubAssetClassChange = (value: string) => {
    setSelectedSubAssetClass(value);
    const subAssetClass = subAssetClasses.find(sac => sac.name === value);
    setProductionServices(subAssetClass ? subAssetClass.ProductionServices : []);
    handleChange('subAssetClass', value);
  };

  const handleProductionServiceChange = (value: string) => {
    handleChange('productionService', value);
  };

  return (
    <div>
      <EzyOptionSelector
        options={assetData.AssetClasses.map(ac => ac.name)}
        label="Asset Class"
        addNew={true}
        selected={selectedAssetClass}
        onSelect={handleAssetClassChange}
      />
      <EzyOptionSelector
        options={subAssetClasses?.map(sac => sac.name) || []}
        label="Sub Asset Class"
        addNew={true}
        selected={selectedSubAssetClass}
        onSelect={handleSubAssetClassChange}
      />
      <EzyOptionSelector
        options={productionServices?.map(ps => ps.name) || []}
        label="Production Service"
        addNew={true}
        selected={null}
        onSelect={handleProductionServiceChange}
      />
    </div>
  );
};

export default MyComponent;
