REPLACE_PLACEHOLDERS() {
    if [ -z "$1" ]; then
        echo "Usage: REPLACE_PLACEHOLDERS <file_path>"
        exit 1
    fi

    local PL_FILE_NAME="$1"

    if [ ! -f "$PL_FILE_NAME" ]; then
        echo "File not found: $PL_FILE_NAME"
        exit 1
    fi

    content=$(<"$PL_FILE_NAME")

    # Extract placeholders from the file
    placeholders=$(grep -oP '\{\{\K[^}]+(?=\}\})' "$PL_FILE_NAME" | sort -u)

    for placeholder in $placeholders; do
        if [ -z "${!placeholder}" ]; then
            echo "Error: Environment variable '$placeholder' is not set."
            exit 1
        fi
        value="${!placeholder}"
        content="${content//\{\{$placeholder\}\}/$value}"
    done

    # Check if any placeholders are left
    if grep -q '{{.*}}' <<< "$content"; then
        echo "Error: Not all placeholders were replaced."
        exit 1
    fi

    echo "$content" > "$PL_FILE_NAME"
    echo "Placeholders replaced in $PL_FILE_NAME"
}
